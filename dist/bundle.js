(()=>{var e={426:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(81),s=n.n(r),a=n(645),i=n.n(a)()(s());i.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap);"]),i.push([e.id,"* {\n    box-sizing: border-box;\n    margin: 0;\n    font-family: 'Ubuntu', sans-serif;\n    --shadow: 2px 2px 4px;\n    transition: all ease-in-out 350ms;\n    --red: rgb(255, 0, 0, 0.3);\n}\n\n/* HEADER */\n\n.header { \n    position: relative;\n    height: 80px;\n    display: flex;\n    align-items: center;\n    justify-content: space-evenly;\n    z-index: 10;\n}\n\n.gameRecord {\n    width: 162px;\n    text-align: right;\n    color: var(--red);\n}\n\nbutton {\n    background-color: antiquewhite;\n    border: solid 1px grey;\n    border-radius: 2px;\n}\n\nbutton:hover {\n    background-color: var(--red);\n}\n\nbutton:active {\n    background-color: white;\n}\n\ninput:focus {\n    border: solid 1px grey;\n    outline: solid 2px var(--red);\n    border-radius: 2px;\n}\n\n.menus {\n    position: absolute;\n    height: 100vh;\n    width: 100vw;\n    display: flex;\n    justify-content: center;\n    align-items: baseline;\n}\n\n.menus * {\n    z-index: 999;\n}\n\n.splash, .enterNames {\n    transform: translateY(30vh);\n}\n\n/* GAMESETUP */\n\n.setup{\n    position: relative;\n}\n\n.setup h1::first-line {\n    color: var(--red);\n    font-size: 1.5rem;\n}\n\n.setup .controls {\n    width: 330px;\n    display: grid;\n    grid-template-columns: 30px 120px 90px 90px;\n    grid-template-rows: 30px 30px;\n    font-size: 0.7rem;\n\n    margin: 30px 0 0;\n}\n\n.controls label {\n    display: inline-block;\n    width: 30px;\n    border: solid 1px gray;\n    border-right: none;\n    border-radius: 2px 0 0 2px;\n}\n\n.controls select {\n    display: inline-block;\n    width: 120px;\n    border: solid 1px gray;\n    border-left: none;\n    border-radius: 0 2px 2px 0;\n}\n\n.controls select:focus {\n    outline: none;\n}\n\n.controls .error {\n    font-size: 1rem;\n    width: 330px;\n    text-align: center;\n    align-self: center;\n    color: var(--red);\n}\n\n.setup .shipsPreview {\n    width: 330px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n}\n\n.field.hover {\n    background-color: lightgray;\n}\n.field.invalid {\n    background-color: lightcoral;\n}\n\n.gameDiv {\n    display: grid;\n    grid-template-rows: 300px 300px;\n    grid-template-columns: 300px 330px;\n    justify-content: center;\n}\n\n.hidden {\n    display: none;\n}\n\n\n#board1 {\n    grid-area: 1 / 2 / 2 / 3;\n    z-index: 1;\n}\n\n#board2 { \n    grid-area: 2 / 1 / 3 / 2;\n    z-index: 2;\n}\n\n#display1 {\n    position: relative;\n    top: 90px;\n    left: 90px;\n}\n#display2 {\n    position: relative;\n    top: 120px;\n    left: 120px;\n}\n\n.board {\n    width: 330px;\n    height: 330px;\n    display: grid;\n    grid-template-rows: repeat(11, 30px);\n    justify-content: center;\n    align-items: center;\n    box-shadow: var(--shadow)\n}\n\n.display {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1.5rem;\n    width: 120px;\n    height: 120px;\n    flex-shrink: 0;\n    background-color: antiquewhite;\n    border-radius: 5px;\n    box-shadow: var(--shadow)\n\n}\n\n.row {\n    display: grid;\n    grid-template-columns: repeat(11, 30px);\n    justify-content: center;\n    align-items: center;\n}\n\n.field, .label, .preview {\n    width: 30px;\n    height: 30px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border: solid 1px black;\n    background-color: white;\n}\n\n.ship.preview {\n    transform-origin: top left;\n}\n\n.rotated {\n    transform: rotate(90deg);\n}\n\n.label {\n    background-color: var(--red);\n}\n.label.corner {\n    background-color: transparent;\n}\n\n.ship {\n}\n\n.ship.A {\n    background-color: rgb(0, 128, 0, 0.3);\n}\n.ship.B {\n    background-color: rgba(0, 0, 128, 0.3);\n}\n.ship.C {\n    background-color: rgba(128, 0, 0, 0.3);\n}\n.ship[class*=\"D\"] {\n    background-color: rgba(128, 0, 128, 0.3);\n}\n.ship[class*=\"S\"] {\n    background-color: rgba(0, 128, 128, 0.3);\n}\n\n.field.hit {\n    color: red;\n}\n.field.miss {\n    color: blue;\n}\n\n.board .field.sunk {\n    background-color: rgb(93, 93, 93, 0.3);\n}\n\n/* SWITCH PLAYER */\n\n.switchPlayerScreen::after {\n    content: '...';\n    color: var(--red);\n}\n\n.board.hide > *{\n    opacity: 0;\n}\n/* GAME OVER */\n.gameOverScreen, .switchPlayerScreen {\n    text-align: center;\n    transform: translateY(30vh);\n}\n\n.gameOverScreen h1 {\n    color:rgba(128, 0, 0, 0.3);\n    font-size: 3rem;\n    text-shadow: 2px 2px 2px antiquewhite;\n}\n\n.gameOverScreen h2 {\n    margin: 0.4rem;\n}\n\n@media screen and (max-width: 700px) {\n    .gameDiv{\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 30px\n    }\n    .display {\n        display: none;\n    }\n    .header {\n        transform: scale(0.6);\n        transform-origin: bottom;\n        height: 50px;\n    }\n    .setup {\n        transform: scale(0.8);\n    }\n    .splash, .enterNames {\n        transform: translateY(20vh);\n    }\n\n}\n\n@media screen and (max-height: 700px) {\n    .content{\n        height: 500px;\n        transform: scale(0.8);\n    }\n    .header {\n        height: 50px;\n    }\n}\n\n",""]);const o=i},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,s,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),t.push(d))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],o=0;o<e.length;o++){var l=e[o],c=r.base?l[0]+r.base:l[0],d=a[c]||0,u="".concat(c," ").concat(d);a[c]=d+1;var p=n(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var h=s(m,r);r.byIndex=o,t.splice(o,0,{identifier:u,updater:h,references:1})}i.push(u)}return i}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var a=r(e=e||[],s=s||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var o=n(a[i]);t[o].references--}for(var l=r(e,s),c=0;c<a.length;c++){var d=n(a[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},417:function(e,t,n){const{Player:r}=n(507);t.Game=function(e){this.players={player1:new r("Player1"),player2:new r("Computer")},this.currentPlayer=!0,this.twoPlayer=e,this.gameOver=!1,this.compQueue={lastHits:[],direction:null,cue:[]},this.gameModes={modern:{ships:[[5,"A","Carrier"],[4,"B","Battleship"],[3,"C","Cruiser"],[3,"S","Submarine"],[2,"D","Destroyer"]]},classic:{ships:[[5,"A","Carrier"],[4,"B","Battleship"],[3,"C","Cruiser"],[2,"D1","Destroyer 1"],[2,"D2","Destroyer 2"],[1,"S1","Submarine 1"],[1,"S2","Submarine 2"]]}}},this.Game.prototype={curPlayerAttacks:function(e){if(this.gameOver)return;let t,n;return t=this.currentPlayer?this.players.player2.receiveAttack(e):this.players.player1.receiveAttack(e),this.twoPlayer?this.currentPlayer=!this.currentPlayer:n=this.compAttack(),[t,n]},compAttack:function(){if(this.gameOver)return;let e,t,n;for(;!e;)try{this.compQueue.cue.length>0?[t,n]=this.compQueue.cue.shift():(t=Math.floor(10*Math.random()),n=Math.floor(10*Math.random())),e=this.players.player1.receiveAttack([t,n]),"HIT!"===e.attackResult[0]&&this.fillQueue(t,n),"SUNK!"===e.attackResult[0]&&this.clearQueue(e.attackResult[1].coords)}catch{continue}return e},fillQueue:function(e,t){if(this.compQueue.lastHits.length>0){this.compQueue.direction||this.trackDirection(e,t);const[n,r]=this.compQueue.lastHits[this.compQueue.lastHits.length-1];let s;"vertical"===this.compQueue.direction?s=[[e+1,t],[e-1,t],[n+1,t],[n-1,t]]:"horizontal"===this.compQueue.direction&&(s=[[e,t+1],[e,t-1],[e,r+1],[e,r-1]]),s.forEach((e=>{this.compQueue.cue.some((t=>JSON.stringify(t)===JSON.stringify(e)))||this.compQueue.cue.unshift(e)}))}this.compQueue.lastHits.push([e,t]),[[e,t+1],[e+1,t],[e,t-1],[e-1,t]].forEach((e=>{e[0]>=0&&e[0]<=9&&e[1]>=0&&e[1]<=9&&this.compQueue.cue.push(e)}))},clearQueue:function(e){if(e.forEach((e=>{this.compQueue.lastHits.some((t=>{if(strX=JSON.stringify(e),strY=JSON.stringify(t),strX===strY){const e=this.compQueue.lastHits.findIndex((e=>JSON.stringify(e)===strY));this.compQueue.lastHits.splice(e,1)}}))})),this.compQueue.direction=null,this.compQueue.lastHits.length>0){const[e,t]=this.compQueue.lastHits.pop();this.fillQueue(e,t)}},trackDirection:function(e,t){const[n,r]=this.compQueue.lastHits[this.compQueue.lastHits.length-1];e===n+1&&t===r||e===n-1&&t===r?this.compQueue.direction="vertical":(t===r+1&&e===n||t===r-1&&e===n)&&(this.compQueue.direction="horizontal")}}},507:function(e,t,n){const{Ship:r}=n(643);t.Player=function(e){this.board=new Array(10).fill(null).map((()=>new Array(10).fill(null))),this.ships={},this.hasLost=!1,this.name=e,this.wins=0},this.Player.prototype={placeShip:function(e,t,n,s){let[a,o]=n;for(this.testShipPlacement(e,a,o,s),this.ships[t]=new r(e),i=0;i<e;i++)s?(this.board[a-i][o]=t,this.ships[t].coords.push([a-i,o])):(this.board[a][o+i]=t,this.ships[t].coords.push([a,o+i]))},testShipPlacement:function(e,t,n,r){for(i=0;i<e;i++)if(r){if(null!==this.board[t-i][n])throw new Error("Invalid placement.")}else if(null!==this.board[t][n+i])throw new Error("Invalid placement.")},findShipType:function(e){switch(e){case 5:return"A";case 4:return"B";case 3:return this.ships.C?"S":"C";case 2:return"D"}},populateGameboard:function(e){let t=!1;for(;!t;){t=!0;for(let n of e.ships){let e=n[0],r=n[1],s=Math.floor(10*Math.random()),a=Math.floor(10*Math.random()),i=Math.random()>.5;try{this.placeShip(e,r,[s,a],i)}catch{t=!1,this.clearAll();break}}}},clearAll:function(){this.board=new Array(10).fill(null).map((()=>new Array(10).fill(null))),this.ships={}},receiveAttack:function(e){let t;const[n,r]=e,s=this.board[n][r];if("X"==s||"O"==s)throw new Error("Invalid move, field has already been attacked");if(n<0||n>9||r<0||r>9)throw new Error("Invalid move, coordinates out of bounds");return null!=s?(t=this.ships[s].hit(),this.checkStatus(),this.board[n][r]="O"):(t=["MISS!",null],this.board[n][r]="X"),{attackResult:t,isGameOver:this.hasLost}},checkStatus:function(){if(Object.values(this.ships).every((e=>e.isSunk))){this.hasLost=!0;const e=new CustomEvent("gameOver",{detail:this.name});window.dispatchEvent(e)}}}},649:(e,t)=>{t.initiateScreens=function(){const e=document.querySelector(".content"),t=document.querySelector(".menus");function n(e){if(e){const e=document.querySelector(".header h1");e.style.transform="translateY(30vh) scale(2)",e.style.position="absolute",e.style.left=`50vw - ${e.offsetWidth/2}px`,e.style.color="black"}else title.style.transform="",title.style.position="static",title.style.left="",title.style.color="antiquewhite",title.style.opacity="0.8"}return n(!0),{splash:function(e){const n=document.createElement("div");n.classList.add("splash");const r=document.createElement("button");r.id="singlePlayerBtn",r.textContent="Single player";const s=document.createElement("button");s.id="twoPlayerBtn",s.textContent="Two players",n.append(r,s),t.append(n),r.addEventListener("click",(()=>{n.style.opacity="0",setTimeout((()=>{e(!1),setTimeout((()=>t.removeChild(n)),0)}),350)})),s.addEventListener("click",(()=>{n.style.opacity="0",setTimeout((()=>{e(!0),setTimeout((()=>t.removeChild(n)),0)}),350)}))},enterNames:function(e){return new Promise(((n,r)=>{const s=document.createElement("form");s.classList.add("enterNames");const a=document.createElement("label"),i=document.createElement("input");i.placeholder="Player 1",a.textContent="Player 1 enter name : ",a.append(i),s.append(a),t.append(s),s.style.opacity="0",setTimeout((()=>{s.style.opacity="1"}),0),i.focus();let o="player1";s.addEventListener("submit",(r=>{s.style.opacity="0",r.preventDefault();const l=""===r.target[0].value?r.target[0].placeholder:r.target[0].value;e.players[o].name=l,e.twoPlayer&&"player1"===o?setTimeout((()=>{s.style.opacity="1",i.value="",i.placeholder="Player 2",a.textContent="Player 2 enter name : ",a.append(i),i.focus(),o="player2"}),350):setTimeout((()=>{s.style.opacity="0",n(),setTimeout((()=>t.removeChild(s)),0)}),350)}))}))},setupGameboard:async function(e,r,s,a,i){return n(!1),new Promise(((n,o)=>{r.id="setup";const l=r.querySelectorAll(".field");let c=a||"player1";const d=document.createElement("div");d.classList.add("setup");const u=document.createElement("h1");u.innerText=`${e.players[c].name}\n Place your ships`;const p=document.createElement("span");p.classList.add("error");const m=document.createElement("div");m.classList.add("controls"),i=i||"modern";const h=document.createElement("label");h.textContent="Game mode";const y=document.createElement("select"),f=document.createElement("option");f.textContent="Modern",f.id="modern";const v=document.createElement("option");v.textContent="Classic",v.id="classic",y.addEventListener("change",(t=>{i=t.target.value.toLowerCase(),e.players[c].clearAll(),s(c,e),x()})),y.append(f,v),"player2"===a&&(f.id===i?f.selected=!0:v.selected=!0,y.disabled=!0);const g=document.createElement("button");g.textContent="Random",g.addEventListener("click",(()=>{e.players[c].populateGameboard(e.gameModes[i]),s(c,e),b.innerHTML=""})),startGameBtn=document.createElement("button"),startGameBtn.textContent=e.twoPlayer&&"player2"!==c?"Next":"Start Game",startGameBtn.addEventListener("click",(async()=>{if(0!==b.childElementCount)return p.style.opacity="0",setTimeout((()=>{p.textContent="place all remaining ships!",p.style.opacity="1"}),350),void setTimeout((()=>{p.style.opacity="0",setTimeout((()=>p.textContent=""),350)}),3e3);d.style.opacity="0",setTimeout((async()=>"Next"===startGameBtn.textContent?(e.currentPlayer=!e.currentPlayer,l.forEach((e=>{e.classList.remove(...e.classList),e.classList.add("field"),e.removeEventListener("dragenter",P),e.removeEventListener("dragover",T),e.removeEventListener("drop",A)})),t.removeChild(d),await this.switchPlayers(e),n(this.setupGameboard(e,r,s,"player2",i))):(e.twoPlayer||e.players.player2.populateGameboard(e.gameModes[i]),t.removeChild(d),e.currentPlayer=!0,await this.switchPlayers(e),n())),350)})),m.append(h,y,g,startGameBtn,p);const b=document.createElement("div");function x(){b.innerHTML="",instruction=document.createElement("p"),instruction.textContent="double click to flip",b.append(instruction),instruction.style.position="absolute",instruction.style.left="calc(50% - 120px)",instruction.style.marginTop="10px",b.addEventListener("mousedown",(function e(){instruction.style.opacity="0",setTimeout((()=>{b.removeChild(instruction),b.removeEventListener("mousedown",e)}),350)}));let t=e.gameModes[i].ships;for(let e=0;e<t.length;e++){const n=document.createElement("div");n.classList.add("preview","ship",t[e][1]),n.style.height="30px",n.style.width=30*t[e][0]+"px",n.textContent=t[e][2],n.style.fontSize=`calc(0.3rem * ${t[e][0]})`,n.draggable=!0,b.append(n),0===e?(n.dataset.direction="vertical",n.style.transform="rotate(90deg)"):(n.dataset.direction="horizontal",n.style.transform="rotate(0deg)"),n.addEventListener("dragstart",C),n.addEventListener("dragend",k),n.addEventListener("dblclick",M),n.addEventListener("touchstart",C),n.addEventListener("touchmove",(e=>{e.preventDefault()})),n.addEventListener("touchend",k);let r=0;n.addEventListener("touchend",(e=>{const t=(new Date).getTime();t-r<300&&M(e),r=t}))}}let w;b.classList.add("shipsPreview"),x(),l.forEach((e=>{e.addEventListener("dragenter",P),e.addEventListener("dragover",T),e.addEventListener("drop",A)}));let E=[],L=!1,S=!1;function C(e){w=e.target,L="vertical"===w.dataset.direction;const t=document.createElement("div");t.id="dragImage",t.style.position="absolute",t.style.top="-150px";const n=this.cloneNode(!0),r=L?90:0;n.style.transform=`rotate(${r}deg)`,t.append(n),document.body.append(t),e.dataTransfer.setDragImage(t,0,0),e.dataTransfer.setData("text/plain",""),setTimeout((()=>this.style.display="none"),0)}function k(){this.style.display="flex";const e=document.querySelector("#dragImage");document.body.removeChild(e),O(),L=!1}function P(e){S=!1;const t=parseInt(w.style.width.slice(0,-2))/30-1,n=e.target.dataset.coords;O(),function(e,t){const n=parseInt(t[1]),r=parseInt(t[3]);let s,a;for(let t=0;t<=e;t++){[s,a]=L?[n-t,r]:[n,r+t];const e=document.querySelector(`[data-coords="[${s},${a}]"]`);null===e||"ship"===e.classList[1]?S=!0:E.push(e)}}(t,n);const r=S?"invalid":"hover";E.forEach((e=>e.classList.add(r)))}function T(e){e.preventDefault()}function A(t){if(S)return;const n=parseInt(t.target.dataset.coords[1]),r=parseInt(t.target.dataset.coords[3]),a=parseInt(w.style.width.slice(0,-2))/30,i=w.classList[2],o=[n,r];e.players[c].placeShip(a,i,o,L),s(c,e),b.removeChild(w)}function M(e){const t=e.target;angle="horizontal"===t.dataset.direction?90:0,t.style.transform=`rotate(${angle}deg)`,t.dataset.direction=0===angle?"horizontal":"vertical"}function O(){E.forEach((e=>{e.classList.remove("hover","invalid")})),E=[]}d.append(u,m,r,b),t.append(d),d.style.opacity="0",setTimeout((()=>d.style.opacity="1"),350)}))},switchPlayers:async function(e){return new Promise(((n,r)=>{const s=document.createElement("div");s.classList.add("switchPlayerScreen"),s.innerHTML="<span></span>'s turn in &nbsp;<span><span>",s.style.opacity="0",t.append(s);const a=e.currentPlayer?e.players.player1.name:e.players.player2.name,i=document.querySelector(".switchPlayerScreen span:first-child"),o=document.querySelector(".switchPlayerScreen span:last-child"),l=document.querySelector("#board1"),c=document.querySelectorAll(".content > *:not(.switchPlayerScreen)");setTimeout((()=>{c.forEach((e=>e.style.filter="blur(15px)")),l&&l.classList.toggle("hide"),s.style.opacity="1",i.textContent=a;for(let e=0;e<3;e++)setTimeout((()=>{o.textContent=3-e}),1e3*e);setTimeout((()=>(s.style.opacity="0",c.forEach((e=>e.style.filter="blur(0px)")),o.textContent="",this.eventListenerActive=!0,l&&l.classList.toggle("hide"),setTimeout((()=>t.removeChild(s)),0),n())),3e3)}),350)}))},gameOver:function(r){const s=document.createElement("div");s.classList.add("gameOverScreen");const a=document.createElement("h1");a.textContent="GAME OVER";const i=document.createElement("h2"),o=document.createElement("button");o.textContent="Start new game",s.append(a,i,o),s.style.opacity="0",t.append(s),this.eventListenerActive=!1,setTimeout((()=>{n(!0),s.style.opacity="1",e.style.filter="blur(15px)",i.textContent=`${r} wins!`,o.addEventListener("click",(()=>{setTimeout((()=>{s.style.opacity="0";const n=new CustomEvent("newGame");window.dispatchEvent(n),setTimeout((()=>{t.removeChild(s),e.innerHTML="",e.style.opacity="1",e.style.filter=""}),350)}),350)}))}),1500)}}}},643:function(e,t){t.Ship=function(e){this.length=e,this.hitCount=0,this.isSunk=!1,this.coords=[]},this.Ship.prototype={hit:function(){return this.hitCount++,this.checkSunk()},checkSunk:function(){let e="HIT!";return this.hitCount>=this.length&&(this.isSunk=!0,e="SUNK!"),[e,this]}}},281:(e,t,n)=>{const{initiateScreens:r}=n(649),s=r();t.initiateUI=function(){const e=document.querySelector(".content"),t=document.querySelector(".gameRecord");function n(){const e=document.createElement("div");e.classList.add("board");for(let t=10;t>=0;t--){const n=document.createElement("div");n.classList.add("row"),n.dataset.row=t-1;for(let e=0;e<=10;e++){const r=document.createElement("div");0==t||0==e?(r.classList.add("label"),0==t?0==e?(r.textContent="",r.classList.add("corner")):r.textContent=e:0==e&&(r.textContent="ABCDEFGHIJ"[t-1])):(r.classList.add("field"),r.dataset.coords=`[${t-1},${e-1}]`),n.append(r)}e.append(n)}return e}function r(e,t){e.style.opacity="0",setTimeout((()=>{e.textContent=t,e.style.opacity="1"}),350),setTimeout((()=>{e.style.opacity="0"}),1e3)}function a(e,t){const n=t?"#board1":"#board2";e.coords.forEach((e=>{document.querySelector(`${n} [data-coords="[${e}]"]`).classList.add("sunk")}))}return{gameSetup:async function(e,t=!1){t?(e.players.player1.name=t.player1.name,e.players.player1.wins=t.player1.wins,e.players.player2.name=t.player2.name,e.players.player2.wins=t.player2.wins):await s.enterNames(e);const r=n();return await s.setupGameboard(e,r,this.updateGameboard),Promise.resolve()},drawGame:function(t){e.innerHTML="";const r=document.createElement("div");r.classList.add("gameDiv");const s=n();s.id="board1";const a=n();a.id="board2";const i=document.createElement("div");i.classList.add("display"),i.id="display1";const o=document.createElement("div");i.append(o);const l=document.createElement("div");l.classList.add("display"),l.id="display2";const c=document.createElement("div");l.append(c),r.append(s,i,a,l),e.append(r),r.style.opacity="0",setTimeout((()=>r.style.opacity="1"),350)},update:function(e){e.twoPlayer&&(display1.textContent=e.currentPlayer?e.players.player1.name:e.players.player2.name);const t=e.currentPlayer?"player1":"player2",n=e.currentPlayer?"player2":"player1";this.updateGameboard(t,e,"board1"),this.updateGameboard(n,e,"board2")},updateGameboard:function(e,t,n="setup"){for(let r=9;r>=0;r--)for(let s=0;s<10;s++){const a=document.querySelector(`#${n} [data-coords="[${r},${s}]"`);a.textContent="",a.classList.remove(...a.classList),a.classList.add("field");const i=t.players[e].board[r][s];if("X"===i)a.classList.add("miss"),a.textContent=i;else if("O"===i)for(ship in"board1"===n&&a.classList.add("ship"),a.classList.add("hit"),a.textContent=i,t.players[e].ships)t.players[e].ships[ship].coords.some((n=>{if(n[0]===r&&n[1]===s)return t.players[e].ships[ship].isSunk?a.classList.add("sunk"):a.classList.add(ship)}));else(null!==i&&"board1"===n||null!==i&&"setup"===n)&&(a.classList.add("ship"),a.classList.add(i))}},eventListenerActive:!0,setupEventListeners:function(e,t){document.querySelector(".content #board2").querySelectorAll(".field").forEach((n=>{n.addEventListener("click",(n=>{this.handleAttacks(n,e,t)}))}))},handleAttacks:function(e,t,n){if(!this.eventListenerActive)return;const i=document.querySelector("#display1 div"),o=document.querySelector("#display2 div"),l=e.target.dataset.coords.slice(1,-1).split(",");let c;try{c=t(l);let d=c[0].attackResult;if(r(o,d[0]),this.eventListenerActive=!1,!n.twoPlayer){let e=c[1].attackResult;setTimeout((()=>{r(i,e[0]),"SUNK!"===e[0]&&a(e[1],!0)}),1e3)}if(function(e,t){switch(e[0]){case"MISS!":t.textContent="X",t.style.color="blue";break;case"HIT!":t.textContent="O",t.style.color="red";break;case"SUNK!":t.textContent="O",t.style.color="red",a(e[1],!1)}}(d,e.target),n.gameOver)return;n.twoPlayer?setTimeout((async()=>{await s.switchPlayers(n),this.update(n),this.eventListenerActive=!0}),1e3):setTimeout((()=>{this.update(n),this.eventListenerActive=!0}),1e3)}catch(e){r(o,"!")}},toggleGameOver:function(e,n){t.innerHTML="";const r=document.createElement("div"),a=document.createElement("div");r.textContent=`${n.players.player1.name} : ${n.players.player1.wins} wins`,a.textContent=`${n.players.player2.name} : ${n.players.player2.wins} wins`,t.append(r,a),s.gameOver(e)},setupSplash:function(e){s.splash(e)}}}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={id:r,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{"use strict";var e=n(379),t=n.n(e),r=n(795),s=n.n(r),a=n(569),i=n.n(a),o=n(565),l=n.n(o),c=n(216),d=n.n(c),u=n(589),p=n.n(u),m=n(426),h={};h.styleTagTransform=p(),h.setAttributes=l(),h.insert=i().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=d(),t()(m.Z,h),m.Z&&m.Z.locals&&m.Z.locals;const{Game:y}=n(417),{initiateUI:f}=n(281);let v,g=f();async function b(e,t=!1){v=new y(e),await g.gameSetup(v,t),g.drawGame(v),g.update(v),g.setupEventListeners(v.curPlayerAttacks.bind(v),v)}g.setupSplash(b),window.addEventListener("gameOver",(e=>{v.gameOver=!0;const t=e.detail;let n;for(let e in v.players)v.players[e].name!==t&&(n=v.players[e].name,v.players[e].wins++);g.toggleGameOver(n,v)})),window.addEventListener("newGame",(()=>{const e={player1:{name:v.players.player1.name,wins:v.players.player1.wins},player2:{name:v.players.player2.name,wins:v.players.player2.wins},twoPlayer:v.twoPlayer};b(e.twoPlayer,e)}))})()})();